(this.webpackJsonpkaodashi=this.webpackJsonpkaodashi||[]).push([[0],{35:function(e){e.exports=JSON.parse('[{"key":"1","name":"\u9577\u91ce\u770c\u98ef\u7530\u5e02","width":800,"height":804,"heads_position":[[270,380]],"latitude":35.515777,"longitude":137.81949,"head_width":85},{"key":"2","name":"\u9759\u5ca1\u770c\u639b\u5ddd\u5e02","width":800,"height":804,"heads_position":[[440,220],[510,200]],"latitude":34.804871,"longitude":138.076118,"head_width":45},{"key":"3","name":"\u9ce5\u53d6\u770c\u9ce5\u53d6\u5e02\u7802\u306e\u7f8e\u8853\u9928","width":800,"height":800,"heads_position":[[150,300],[400,260]],"latitude":35.539623,"longitude":134.238312,"head_width":75},{"key":"4","name":"\u9759\u5ca1\u770c\u9759\u5ca1\u5e02\u7531\u6bd4\u672c\u9663\u516c\u5712","width":800,"height":815,"heads_position":[[270,400],[450,300]],"latitude":35.107809,"longitude":138.56727,"head_width":75},{"key":"5","name":"\u611b\u77e5\u770c\u8c4a\u6a4b\u5e02\u5b89\u4e45\u7f8e\u795e\u6238\u795e\u660e\u793e","width":800,"height":810,"heads_position":[[310,290],[500,250]],"latitude":34.768361,"longitude":137.394717,"head_width":65},{"key":"6","name":"\u6ecb\u8cc0\u770c\u5b88\u5c71\u5e02\u304a\u3046\u307f\u3093\u3061\u5b88\u5c71","width":800,"height":801,"heads_position":[[310,230],[510,300]],"latitude":35.093789,"longitude":135.974356,"head_width":80},{"key":"7","name":"\u4eac\u90fd\u5e9c\u4eac\u90fd\u5e02\u8a93\u9858\u5bfa","width":800,"height":800,"heads_position":[[385,300],[555,340]],"latitude":34.986222,"longitude":135.688628,"head_width":65},{"key":"8","name":"\u6ecb\u8cc0\u770c\u7c73\u539f\u5e02\u9053\u306e\u99c5","width":800,"height":807,"heads_position":[[265,215],[520,360]],"latitude":35.399359,"longitude":136.371011,"head_width":75},{"key":"9","name":"\u4e09\u91cd\u770c\u5357\u725f\u5a41\u90e1\u9053\u306e\u99c5\u30d1\u30fc\u30af\u4e03\u91cc\u5fa1\u6d5c","width":800,"height":799,"heads_position":[[290,320],[475,320]],"latitude":33.804093,"longitude":136.043205,"head_width":70},{"key":"10","name":"\u548c\u6b4c\u5c71\u770c\u548c\u6b4c\u5c71\u5e02\u962a\u548c\u81ea\u52d5\u8eca\u9053","width":800,"height":809,"heads_position":[[515,265]],"latitude":34.219747,"longitude":135.222062,"head_width":75},{"key":"11","name":"\u9999\u5ddd\u770c\u5c0f\u8c46\u90e1\u5c0f\u8c46\u5cf6","width":800,"height":800,"heads_position":[[235,300],[535,280]],"latitude":34.511364,"longitude":134.303156,"head_width":55},{"key":"12","name":"\u9759\u5ca1\u770c\u6cbc\u6d25\u5e02\u6cbc\u6d25\u6e2f","width":800,"height":840,"heads_position":[[470,240],[265,480]],"latitude":35.082679,"longitude":138.858188,"head_width":80},{"key":"13","name":"\u9ad8\u77e5\u57ce\u5efa\u753a","width":800,"height":800,"heads_position":[[390,430],[165,605]],"latitude":33.468237,"longitude":133.307926,"head_width":105},{"key":"14","name":"\u9ad8\u77e5\u99c5","width":800,"height":800,"heads_position":[[365,225]],"latitude":33.577511,"longitude":133.545189,"head_width":100},{"key":"15","name":"\u611b\u77e5\u770c\u540d\u53e4\u5c4b\u5e02","width":800,"height":784,"heads_position":[[330,260],[480,275]],"latitude":35.120638,"longitude":136.909128,"head_width":80}]')},57:function(e,t,i){e.exports=i(69)},62:function(e,t,i){},69:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(14),d=i.n(o),h=(i(62),i(43)),r=i(15),l=i(49),u=i(44),c=i.n(u),s=i(45),w=i.n(s),g=i(87);var m=function(e){var t=e.shotting,i=e.setShotting,o=e.imageLoaded,d=e.setImageLoaded,h=e.image,u=e.windowWidth,s=Object(n.useState)(null),m=Object(r.a)(s,2),f=m[0],p=m[1],b=Object(n.useRef)(null),y=Object(n.useRef)(null),k=Object(n.useRef)(null),v=h.heads_position[0],_=u,E=h.height/h.width*_,j=2*h.head_width,O=j/h.width*_,S={top:(v[1]-j/2)/h.width*_,left:(v[0]-j/2)/h.width*_},L=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(t);return Object(n.useEffect)((function(){if(t&&t!==L&&b.current&&k.current&&y.current&&y.current.video){var e=document.createElement("canvas");e.width=_,e.height=E;var i=e.getContext("2d");i&&(i.fillStyle="white",i.fillRect(0,0,_,E),i.save(),i.translate(_,0),i.scale(-1,1),i.drawImage(y.current.video,_-S.left-O,S.top),i.restore(),i.drawImage(k.current,0,0,_,E),p(e.toDataURL()))}}),[t,L,S,_,E,O]),a.a.createElement("div",{ref:b,style:{height:E}},o&&a.a.createElement(c.a,{mirrored:!0,audio:!1,videoConstraints:{width:O,height:O},ref:y,style:Object(l.a)({position:"absolute"},S)}),a.a.createElement("img",{src:"".concat("/kaodashi","/images/").concat(h.key,".png"),alt:h.name,ref:k,style:{position:"absolute",width:"100%"},onLoad:function(){return d(!0)}}),a.a.createElement(g.a,{in:t,direction:"up"},a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"white",display:t?"flex":"none",flexDirection:"column",justifyContent:"center",alignItems:"center"}},f&&a.a.createElement("img",{alt:"Screenshot",src:f,width:_,height:E}),a.a.createElement(w.a,{onClick:function(){i(!1),p(null)},fontSize:"large",style:{marginTop:15,marginBottom:100}}))))},f=i(48),p=i(86),b=i(46),y=i.n(b),k=i(50),v=i(85),_=Object(k.a)((function(e){e.windowWidth;var t=Object(f.a)(e,["windowWidth"]);return a.a.createElement(v.a,t)}))({display:"flex",flexFlow:"column",position:"absolute",right:5,borderRadius:25,backgroundColor:"rgba(255, 255, 255, 0.6)",top:function(e){return e.windowWidth/2-48}});var E=function(e){var t=e.windowWidth,i=e.takeScreenShot;return a.a.createElement(_,{windowWidth:t},a.a.createElement(p.a,{color:"primary",onClick:i},a.a.createElement(y.a,null)))},j=i(38),O=i.n(j),S=i(39);var L=function(){var e="object"===typeof window,t=Object(n.useState)(e?{width:window.innerWidth,height:window.innerHeight}:void 0),i=Object(r.a)(t,2),a=i[0],o=i[1];return Object(n.useEffect)((function(){function t(){o({width:window.innerWidth,height:window.innerHeight})}if(e)return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[e,o]),a};var I=function(e){var t=e.image,i=e.allImages,o=e.setImage,d=e.shotting,h=t.latitude,l=t.longitude,u=t.key,c=L(),s=Object(n.useState)({latitude:h,longitude:l,width:400,height:400,zoom:7}),w=Object(r.a)(s,2),g=w[0],m=w[1];return a.a.createElement(S.b,Object.assign({},Object.assign(g,{width:c?c.width:0,height:c?c.height-c.width+50:0}),{onViewportChange:m,style:{display:d?"none":"inherit",position:"absolute",bottom:0,width:"100%"},mapStyle:"mapbox://styles/mapbox/streets-v11"}),i.map((function(e){return a.a.createElement(S.a,{latitude:e.latitude,longitude:e.longitude,key:e.key,offsetLeft:-20,offsetTop:-10},e.key===u?a.a.createElement(O.a,{color:"secondary"}):a.a.createElement(O.a,{color:"primary",onClick:function(){return o(e)}}))})))},W=i(35);var x=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),i=t[0],o=t[1],d=Object(n.useState)(!1),l=Object(r.a)(d,2),u=l[0],c=l[1],s=Object(n.useState)(null),w=Object(r.a)(s,2),g=w[0],f=w[1],p=L();return Object(n.useEffect)((function(){var e,t=new URLSearchParams(document.location.search.substring(1)).get("key");if(t){var i,n=Object(h.a)(W);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.key===t){e=a;break}}}catch(o){n.e(o)}finally{n.f()}}e||(e=function(e){return e[Math.floor(Math.random()*Math.floor(e.length))]}(W)),f(e)}),[]),g&&p?a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(I,{image:g,allImages:W,setImage:function(e){c(!1),f(e)},shotting:i}),a.a.createElement(m,{shotting:i,setShotting:o,image:g,imageLoaded:u,setImageLoaded:c,windowWidth:p.width}),!i&&u&&a.a.createElement(E,{windowWidth:p.width,takeScreenShot:function(){return o(!0)}})):a.a.createElement("div",null,"Loading")};d.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.ba8ad663.chunk.js.map